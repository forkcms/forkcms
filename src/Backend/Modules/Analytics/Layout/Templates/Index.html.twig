{# This file is generated by the Spoon2Twig Converter #}

{% include "/Layout/Templates/Head.html.twig" %}
{% include "/Layout/Templates/StructureStartModule.html.twig" %}

<div class="pageTitle">
  <h2>{{ 'lbl.Analytics'|trans|capitalize }}</h2>
</div>

<div class="box">
  <div class="heading">
    <h3>{{ 'lbl.Statistics'|trans|capitalize }} {{ 'lbl.From'|trans|capitalize }} {{ startTimestamp|formatdate }} {{ 'lbl.Till'|trans|capitalize }} {{ endTimestamp|formatdate }}</h3>
  </div>

  <div class="footer oneLiner">
    {% form dates %}
      <p>
        <label for="startDate">{{ 'lbl.StartDate'|trans|capitalize }}</label>
        {% form_field start_date %}
      </p>
      <p>
        <label for="endDate">{{ 'lbl.EndDate'|trans|capitalize }}</label>
        {% form_field end_date %}
      </p>
      <p>
        <input id="update" type="submit" name="update" value="{{ 'lbl.ChangePeriod'|trans|capitalize }}" />
      </p>
      {% form_field_error start_date %}
      {% form_field_error end_date %}
    {% endform %}
  </div>
  <div class="options">
    <div class="analyticsColWrapper clearfix">
      <div class="analyticsCol">
        <p><strong>{{ page_views }}</strong> {{ 'lbl.Pageviews'|trans|capitalize }}</p>
        <p><strong>{{ visitors }}</strong> {{ 'lbl.Visitors'|trans|capitalize }}</p>
      </div>
      <div class="analyticsCol">
        <p><strong>{{ pages_per_visit|formatfloat }}</strong> {{ 'lbl.PagesPerVisit'|trans|capitalize }}</a></p>
        <p><strong>{{ time_on_site|formattime }}</strong> {{ 'lbl.AverageTimeOnSite'|trans|capitalize }}</p>
      </div>
      <div class="analyticsCol">
        <p><strong>{{ new_sessions_percentage|formatfloat }}%</strong> {{ 'lbl.NewVisitsPercentage'|trans|capitalize }}</p>
        <p><strong>{{ bounce_rate|formatfloat }}%</strong> {{ 'lbl.BounceRate'|trans|capitalize }}</p>
      </div>
    </div>
  </div>

  <div class="options content">
    <div class="analyticsGraphWrapper">
      <div class="analyticsLeftCol">
        <div class="box boxLevel2">
          <div class="heading">
            <h3>{{ 'lbl.RecentVisits'|trans|capitalize }}</h3>
          </div>
          <div class="options">
            {% if visitors_graph_data %}
              <div id="dataChartDoubleMetricPerDay" class="hidden">
                <span id="maxYAxis">{{ maxYAxis }}</span>
                <span id="tickInterval">{{ tickInterval }}</span>
                <span id="yAxisTitle">{{ 'lbl.Visits'|trans|capitalize }}</span>
                <ul class="series">
                  <li class="serie" id="metric1serie">
                    <span class="name">Pageviews</span>
                    <ul class="data">
                      {% for visitor in visitors_graph_data %}
                        <li>
                          <span class="fulldate">{{ visitor.ga_date|spoondate('D d M',INTERFACE_LANGUAGE|ucwords ) }}</span>
                          <span class="date">{{ visitor.ga_date|spoondate('d M',INTERFACE_LANGUAGE|ucwords ) }}</span>
                          <span class="value">{{ visitor.ga_pageviews }}</span>
                        </li>
                      {% endfor %}
                    </ul>
                  </li>
                  <li class="serie" id="metric2serie">
                    <span class="name">Visitors</span>
                    <ul class="data">
                      {% for visitor in visitors_graph_data %}
                        <li>
                          <span class="fulldate">{{ visitor.ga_date|spoondate('D d M',INTERFACE_LANGUAGE|ucwords ) }}</span>
                          <span class="date">{{ visitor.ga_date|spoondate('d M',INTERFACE_LANGUAGE|ucwords ) }}</span>
                          <span class="value">{{ visitor.ga_users }}</span>
                        </li>
                      {% endfor %}
                    </ul>
                  </li>
                </ul>
              </div>
              <div id="chartDoubleMetricPerDay">&nbsp;</div>
            {% endif %}
          </div>
        </div>
      </div>
      <div class="analyticsRightCol">
        <div class="box boxLevel2">
          <div class="heading">
            <h3><a href="{{ googleTrafficSourcesURL }}">{{ 'lbl.PageviewsByTrafficSources'|trans|capitalize }}</a></h3>
          </div>
          <div class="options">
            {% if source_graph_data %}
              <div id="dataChartPieChart" class="hidden">
                <ul class="data">
                  {% for source in source_graph_data %}
                    <li><span class="label">{{ source.ga_medium }}</span><span class="value">{{ source.ga_pageviews }}</span></li>
                  {% endfor %}
                </ul>
              </div>
              <div id="chartPieChart">&nbsp;</div>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="options content">
    <div class="dataGridHolder">
      {{ dataGridMostViewedPages|raw }}
    </div>
  </div>
</div>

{% include "/Layout/Templates/StructureEndModule.html.twig" %}
{% include "/Layout/Templates/Footer.html.twig" %}
