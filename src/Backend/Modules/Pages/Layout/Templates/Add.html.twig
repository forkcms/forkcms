{# This file is generated by the Spoon2Twig Converter #}

{% extends '/Layout/Templates/pages.html.twig' %}

{% block pagesTree %}
    <div class="sub-navigation hidden-xs">
        <div class="pages-tree">
            <div class="alert alert-warning visible-sm">
                <p>{{ 'msg.MovePagesNotPossible'|trans|capitalize }}</p>
            </div>
            <div id="tree">
                {{ tree|raw }}
            </div>
        </div>
        <div id="fullwidthSwitch">
            <a href="#close">&nbsp;</a>
        </div>
    </div>
{% endblock %}

{% block actionbar %}
    <div class="row fork-module-heading">
        <div class="col-md-12">
            <h2>{{ 'lbl.Add'|trans|capitalize }}</h2>
            {% if showPagesIndex %}
            <div class="btn-toolbar pull-right">
                <div class="btn-group" role="group">
                    <a href="{{ geturl('index' ) }}" class="btn btn-default" title="{{ 'lbl.Overview'|trans|capitalize }}">
                        <span class="fa fa-list"></span>
                        {{ 'lbl.Overview'|trans|capitalize }}
                    </a>
                </div>
            </div>
            {% endif %}
        </div>
    </div>
{% endblock %}

{% block content %}
    {% form add %}
        {{ hidTemplateId|raw }}
        <div class="row fork-module-content">
            <div class="col-md-12">
                <div class="form-group">
                    <label for="title" class="control-label">{{ 'lbl.Title'|trans|capitalize }}</label>
                    {% form_field_error title %} {% form_field title %}
                </div>
                <a href="{{ detailURL }}">
                  <small>{{ SITE_URL }}{{ prefixURL }}/<span id="generatedUrl"></span></small>
                </a>
            </div>
        </div>
        <div class="row fork-module-content">
            <div class="col-md-12">
                <div role="tabpanel">
                    <ul class="nav nav-tabs" role="tablist">
                        <li role="presentation" class="active">
                            <a href="#tabContent" aria-controls="home" role="tab" data-toggle="tab">{{ 'lbl.Content'|trans|capitalize }}</a>
                        </li>
                        <li role="presentation">
                            <a href="#tabSettings" aria-controls="profile" role="tab" data-toggle="tab">{{ 'lbl.Settings'|trans|capitalize }}</a>
                        </li>
                        <li role="presentation">
                            <a href="#tabRedirect" aria-controls="messages" role="tab" data-toggle="tab">{{ 'lbl.Redirect'|trans|capitalize }}</a>
                        </li>
                        <li role="presentation">
                            <a href="#tabTags" aria-controls="settings" role="tab" data-toggle="tab">{{ 'lbl.Tags'|trans|capitalize }}</a>
                        </li>
                        <li role="presentation">
                            <a href="#tabSEO" aria-controls="settings" role="tab" data-toggle="tab">{{ 'lbl.SEO'|trans|capitalize }}</a>
                        </li>
                    </ul>
                    <div class="tab-content">
                        <div role="tabpanel" class="tab-pane active" id="tabContent">
                            <div id="editTemplate" class="row">
                                <div class="col-md-12">
                                    {# Do not change the ID! #}
                                    <h3>{{ 'lbl.Template'|trans|capitalize }}: <span id="tabTemplateLabel">&nbsp;</span></h3>

                                    <div class="btn-toolbar pull-right">
                                        <div class="btn-group" role="group">
                                            <button type="button" class="btn" data-toggle="modal" data-target="#changeTemplate">
                                                <span class="fa fa-th"></span>
                                                {{ 'lbl.ChangeTemplate'|trans|capitalize }}
                                            </button>
                                        </div>
                                    </div>
                                    {% if formErrors %}<span class="formError text-danger">{{ formErrors }}</span>{% endif %}
                                </div>
                                <div class="col-md-12">
                                    <div class="panel panel-default">
                                        <div class="panel-body">
                                            <div id="templateVisualFallback" style="display: none">
                                                <div id="fallback" class="generalMessage singleMessage infoMessage">
                                                    <div id="fallbackInfo">
                                                        {{ msg.FallbackInfo }}
                                                    </div>
                                                    <table cellspacing="2">
                                                        <tbody>
                                                        <tr>
                                                            <td data-position="fallback" id="templatePosition-fallback"
                                                                colspan="1" class="box">
                                                                <div class="heading linkedBlocksTitle">
                                                                    <h4>{{ 'lbl.Fallback'|trans|capitalize }}</h4></div>
                                                                <div class="linkedBlocks">
                                                                    <!-- linked blocks will be added here --></div>
                                                            </td>
                                                        </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                            <div id="templateVisualLarge">
                                                &nbsp;
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div role="tabpanel" class="tab-pane" id="tabSettings">
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <ul class="list-unstyled">
                                            {% for _itr_19 in hidden %}
                                            <li class="radio">
                                                <label for="{{ _itr_19.id }}">{{ _itr_19.rbtHidden|raw }} {{ _itr_19.label|capitalize }}</label>
                                            </li>
                                            {% endfor %}
                                        </ul>
                                    </div>
                                    <div class="form-group">
                                        <ul class="list-unstyled">
                                            <li class="checkbox">
                                                <label for="isAction" class="control-label">{% form_field is_action %} {{ msg.IsAction }}</label>
                                            </li>
                                        </ul>
                                    </div>
                                    {% if isGod %}
                                    <div class="form-group">
                                        <ul class="list-unstyled">
                                            {% for _itr_20 in allow %}
                                            <li class="checkbox">
                                                <label for="{{ _itr_20.id }}">{{ _itr_20.chkAllow }} {{ _itr_20.label }}</label>
                                            </li>
                                            {% endfor %}
                                        </ul>
                                    </div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        <div role="tabpanel" class="tab-pane" id="tabRedirect">
                            <div class="row">
                                <div class="col-md-12">
                                    {% if rbtRedirectError %}
                                    <div class="alert alert-danger">{{ rbtRedirectError }}</div>
                                    {% endif %}
                                    <div class="form-group">
                                        <ul class="list-unstyled radiobuttonFieldCombo">
                                            {% for _itr_21 in redirect %}
                                            <li class="radio">
                                                <label for="{{ _itr_21.id }}">{{ _itr_21.rbtRedirect }} {{ _itr_21.label }}</label>
                                                {% if _itr_21.isInternal %}
                                                <label for="internalRedirect" class="_itr_19">{{ _itr_21.label }}</label>
                                                <p class="help-block">{{ msg.HelpInternalRedirect }}</p>
                                                {% form_field_error internal_redirect %} {% form_field internal_redirect %}
                                                {% endif %}
                                                {% if _itr_21.isExternal %}
                                                <label for="externalRedirect" class="_itr_19">{{ _itr_21.label }}</label>
                                                <p class="help-block">{{ msg.HelpExternalRedirect }}</p>
                                                {% form_field_error external_redirect %} {% form_field external_redirect %}
                                                {% endif %}
                                            </li>
                                            {% endfor %}
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div role="tabpanel" class="tab-pane" id="tabTags">
                            <div class="row">
                                <div class="col-md-12">
                                    {% form_field_error tags %} {% form_field tags %}
                                </div>
                            </div>
                        </div>
                        <div role="tabpanel" class="tab-pane" id="tabSEO">
                            {% seo %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="pageButtons" class="row fork-page-actions">
            <div class="col-md-12">
                <div class="btn-toolbar">
                    <div class="btn-group pull-right" role="group">
                        <a href="#" id="saveAsDraft" class="btn btn-primary">
                            <span class="fa fa-file-o"></span>&nbsp;
                            {{ 'lbl.SaveDraft'|trans|capitalize }}
                        </a>
                        <button id="addButton" type="submit" name="add" class="btn btn-primary">
                            <span class="fa fa-plus"></span>&nbsp;
                            {{ 'lbl.Add'|trans|capitalize }}
                        </button>
                    </div>
                </div>
            </div>
        </div>
        {# This is the HTML content, hidden #}
        <div class="modal fade" id="editContent" tabindex="-1" role="dialog" aria-labelledby="{{ 'lbl.Editor'|trans|capitalize }}"
                aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <span class="modal-title h4">{{ 'lbl.Editor'|trans|capitalize }}</span>
                    </div>
                    <div class="modal-body">
                        {% for position in positions %}
                            {% for block in position.blocks %}
                                <div class="alert alert-warning">
                                    {{ msg.ContentSaveWarning }}
                                </div>
                                <div class="box contentBlock" style="margin: 0;">
                                    <div class="blockContent|rawHTML optionsRTE">
                                        <fieldset>
                                            {{ block.txtHTML }}
                                            {{ block.txtHTMLError }}
                                        </fieldset>
                                    </div>

                                    {# this will store the selected extra #}
                                    {{ block.hidExtraId }}

                                    {# this will store the selected position #}
                                    {{ block.hidPosition }}

                                    {# this will store the visible/hidden state #}
                                    <div style="display: none">{{ block.chkVisible }}</div>
                                </div>
                            {% endfor %}
                        {% endfor %}
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">{{ 'lbl.Cancel'|trans|capitalize }}</button>
                        <button id="editContentSubmit" type="button" class="btn btn-primary">{{ 'lbl.OK'|trans|capitalize }}</button>
                    </div>
                </div>
            </div>
        </div>

        {# Dialog to select the content (editor, module or widget). Do not change the ID! #}
        <div class="modal fade" id="addBlock" tabindex="-1" role="dialog" aria-labelledby="{{ 'lbl.ChooseContent'|trans|capitalize }}"
                aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <span class="modal-title h4">{{ 'lbl.ChooseContent'|trans|capitalize }}</span>
                    </div>
                    <div class="modal-body">
                        <input type="hidden" id="extraForBlock" name="extraForBlock" value=""/>

                        <p>{{ msg.HelpBlockContent }}</p>

                        <div id="extraWarningAlreadyBlock" class="alert alert-warning">{{ msg.ModuleBlockAlreadyLinked }}</div>
                        <div id="extraWarningHomeNoBlock" class="alert alert-warning">{{ msg.HomeNoBlock }}</div>
                        <div class="form-group">
                            <label for="extraType" class="control-label">{{ 'lbl.Type'|trans|capitalize }}</label>
                            {% form_field extra_type %}
                        </div>
                        <div id="extraModuleHolder" class="form-group" style="display: none;">
                            <label for="extraModule" class="control-label">{{ 'lbl.WhichModule'|trans|capitalize }}</label>
                            <select id="extraModule" class="form-control">
                                <option value="-1">-</option>
                            </select>
                        </div>
                        <div id="extraExtraIdHolder" class="form-group" style="display: none;">
                            <label for="extraExtraId" class="control-label">{{ 'lbl.WhichWidget'|trans|capitalize }}</label>
                            <select id="extraExtraId" class="form-control">
                                <option value="-1">-</option>
                            </select>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">{{ 'lbl.Cancel'|trans|capitalize }}</button>
                        <button id="addBlockSubmit" type="button" class="btn btn-primary">{{ 'lbl.OK'|trans|capitalize }}</button>
                    </div>
                </div>
            </div>
        </div>

        {# Dialog to select another template. Do not change the ID! #}
        <div class="modal fade" id="changeTemplate" tabindex="-1" role="dialog"
                aria-labelledby="{{ 'lbl.ChooseATemplate'|trans|capitalize }}" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <span class="modal-title h4">{{ 'lbl.ChooseATemplate'|trans|capitalize }}</span>
                    </div>
                    <div class="modal-body">
                        <div class="alert alert-warning">{{ msg.TemplateChangeWarning }}</div>
                        <div id="templateList">
                            <div class="row">
                                {% for template in templates %}
                                <div class="col-sm-6">
                                    <div class="form-group">
                                        <div class="radio">
                                            <label for="template{{ template.id }}">
                                                <input type="radio" id="template{{ template.id }}" value="{{ template.id }}"
                                                        name="template_id_chooser"
                                                        class="inputRadio"{% if template.checked %} checked="checked"{% endif %}{% if template.disabled %} disabled="disabled"{% endif %} />{{ template.label }}
                                            </label>
                                        </div>

                                        <div class="templateVisual current">
                                            {{ template.html|raw }}
                                        </div>
                                    </div>
                                </div>
                                {cycle:'':'</div><div class="row">'}
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">{{ 'lbl.Cancel'|trans|capitalize }}</button>
                        <button id="changeTemplateSubmit" type="button" class="btn btn-primary">{{ 'lbl.OK'|trans|capitalize }}</button>
                    </div>
                </div>
            </div>
        </div>

        {# Dialog to confirm block removal. Do not change the ID! #}
        <div class="modal fade" id="confirmDeleteBlock" tabindex="-1" role="dialog" aria-labelledby="{{ 'lbl.DeleteBlock'|trans|capitalize }}" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <span class="modal-title h4">{{ 'lbl.DeleteBlock'|trans|capitalize }}</span>
                    </div>
                    <div class="modal-body">
                        <p>{{ msg.ConfirmDeleteBlock }}</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">{{ 'lbl.Cancel'|trans|capitalize }}</button>
                        <button id="confirmDeleteBlockSubmit" type="button" class="btn btn-primary">{{ 'lbl.OK'|trans|capitalize }}</button>
                    </div>
                </div>
            </div>
        </div>

        {# Text editor block #}
        <div class="modal fade" id="blockHtml" role="dialog" aria-labelledby="{{ 'lbl.Editor'|trans|capitalize }}" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                        <span class="modal-title h4">{{ 'lbl.Editor'|trans|capitalize }}</span>
                    </div>
                    <div class="modal-body">
                        <div class="alert alert-warning">
                            {{ msg.ContentSaveWarning }}
                        </div>
                        <div class="form-group">
                            {% form_field html %}
                            {% form_field_error html %}
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button id="blockHtmlCancel" type="button" class="btn btn-default" data-dismiss="modal">{{ 'lbl.Cancel'|trans|capitalize }}</button>
                        <button id="blockHtmlSubmit" type="button" class="btn btn-primary">{{ 'lbl.OK'|trans|capitalize }}</button>
                    </div>
                </div>
            </div>
        </div>

        {# Page delete confirm block #}
        {% if item %}
            <div class="modal fade" id="confirmDelete" tabindex="-1" role="dialog" aria-labelledby="{{ 'lbl.Delete'|trans|capitalize }}" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <span class="modal-title h4">{{ 'lbl.Delete'|trans|capitalize }}</span>
                        </div>
                        <div class="modal-body">
                            <p>{{ 'msg.ConfirmDelete'|trans|sprintf(item.title ) }}</p>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">{{ 'lbl.Cancel'|trans|capitalize }}</button>
                            <a href="{{ geturl('delete' ) }}&amp;id={{ item.id }}" class="btn btn-primary">
                                {{ 'lbl.OK'|trans|capitalize }}
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        {% endif %}
    {% endform %}
    <div class="_itr_19">
        <script type="text/javascript">
            //<![CDATA[
            // all the possible templates
            var templates = {};
            {% for templat in templates %}templat[{{ templat.id }}] = {{ templat.json }};
            {% endfor %}

            // the data for the extra's
            var extrasData = {};
            {% if extrasData %}extrasData = {{ extrasData }};
            {% endif %}

            // the extra's, but in a way we can access them based on their ID
            var extrasById = {};
            {% if extrasById %}extrasById = {{ extrasById }};
            {% endif %}

            // indicator that the default blocks may be set on pageload
            var initDefaults = true;
            //]]>
        </script>
    </div>
{% endblock %}
