{# This file is generated by the Spoon2Twig Converter #}

{% include "/Layout/Templates/Head.html.twig" %}
{% include "/Layout/Templates/StructureStartModule.html.twig" %}
<div class="row fork-module-heading">
  <div class="col-md-12">
    <h2>{{ 'lbl.AddNewMailing'|trans|capitalize }}</h2>
  </div>
</div>
<div class="row fork-module-heading">
  <div class="col-md-12">
    <nav class="navbar navbar-default" role="navigation">
      <ul class="nav navbar-nav">
        {% for _itr_17 in wizard %}
        <li class="{% if _itr_17.selected %}active{% endif %}{% if not _itr_17.stepLink %}navbar-text{% endif %}">
          {% if _itr_17.stepLink %}
          <a href="{{ geturl('edit' ) }}&amp;id={{ mailing.id }}&amp;step={{ _itr_17.id }}">
          {% endif %}
            <span>{{ _itr_17.id }}. {{ _itr_17.label|capitalize }}</span>
          {% if _itr_17.stepLink %}
          </a>
          {% endif %}
        </li>
        {% endfor %}
      </ul>
    </nav>
  </div>
</div>
<div class="row fork-module-content">
  <div class="col-md-12">
    {% if step1 %}
    {% form step1 %}
      <div class="row">
        <div class="col-md-12">
          <div class="panel panel-default">
            <div class="panel-heading">
              <h4 class="panel-title">
                {{ 'lbl.Settings'|trans|capitalize }}
              </h4>
            </div>
            <div class="panel-body">
              <div class="form-group">
                <label for="name">
                  {{ 'lbl.Name'|trans|capitalize }}
                  <abbr class="glyphicon glyphicon-asterisk" title="{{ 'lbl.RequiredField'|trans|capitalize }}"></abbr>
                </label>
                <p class="text-info">{{ msg.NameInternalUseOnly }}</p>
                {% form_field_error name %} {% form_field name %}
              </div>
              {% if ddmCampaign %}
              <div class="form-group">
                <label for="campaign">
                  {{ 'lbl.Campaign'|trans|capitalize }}
                  <abbr class="glyphicon glyphicon-asterisk" title="{{ 'lbl.RequiredField'|trans|capitalize }}"></abbr>
                </label>
                {% form_field_error campaign %} {% form_field campaign %}
              </div>
              {% endif %}
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <div class="panel panel-default">
            <div class="panel-heading">
              <h4 class="panel-title">
                {{ 'lbl.Sender'|trans|capitalize }}
              </h4>
            </div>
            <div class="panel-body">
              <div class="form-group">
                <label for="fromName">
                  {{ 'lbl.Name'|trans|capitalize }}
                  <abbr class="glyphicon glyphicon-asterisk" title="{{ 'lbl.RequiredField'|trans|capitalize }}"></abbr>
                </label>
                {% form_field_error from_name %} {% form_field from_name %}
              </div>
              <div class="form-group">
                <label for="fromEmail">
                  {{ 'lbl.EmailAddress'|trans|capitalize }}
                  <abbr class="glyphicon glyphicon-asterisk" title="{{ 'lbl.RequiredField'|trans|capitalize }}"></abbr>
                </label>
                {% form_field_error from_email %} {% form_field from_email %}
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <div class="panel panel-default">
            <div class="panel-heading">
              <h4 class="panel-title">
                {{ 'lbl.ReplyTo'|trans|capitalize }}
              </h4>
            </div>
            <div class="panel-body">
              <div class="form-group">
                <label for="replyToEmail">
                  {{ 'lbl.EmailAddress'|trans|capitalize }}
                  <abbr class="glyphicon glyphicon-asterisk" title="{{ 'lbl.RequiredField'|trans|capitalize }}"></abbr>
                </label>
                {% form_field_error reply_to_email %} {% form_field reply_to_email %}
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <div class="panel panel-default">
            <div class="panel-heading">
              <h4 class="panel-title">
                {{ 'lbl.Recipients'|trans|capitalize }}
              </h4>
            </div>
            <div class="panel-body">
              <div class="form-group">
                {% if chkGroupsError %}
                <p class="text-danger">{% form_field_error groups %}</p>
                {% endif %}
                <ul class="list-unstyled">
                  {% for group in groups %}
                  <li class="checkbox">
                    <label for="{{ group.id }}">
                      {{ group.chkGroups }}
                      <attr title="{{ 'msg.GroupsNumberOfRecipients'|trans|sprintf(group.recipients ) }}">
                        {{ group.label|capitalize }}
                        ({% if group.recipients %}{{ group.recipients }}{% endif %}{% if not group.recipients %}{{ lbl.QuantityNo }}{% endif %} {% if group.single %}{{ lbl.EmailAddress }}{% endif %}{% if not group.single %}{{ lbl.EmailAddresses }}{% endif %})
                      </attr>
                    </label>
                  </li>
                  {% endfor %}
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <div class="panel panel-default">
            <div class="panel-heading">
              <h4 class="panel-title">
                {{ 'msg.TemplateLanguage'|trans|capitalize }}
              </h4>
            </div>
            <div class="panel-body">
              <div class="form-group">
                {% if rbtLanguagesError %}
                <p class="text-danger">{{ rbtLanguagesError }}</p>
                {% endif %}
                <ul class="list-unstyled">
                  {% for languag in languages %}
                  <li class="checkbox">
                    <label for="{{ languag.id }}">
                      {{ languag.rbtLanguages }} {{ languag.label|capitalize }}
                    </label>
                  </li>
                  {% endfor %}
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <div class="btn-toolbar">
            <div class="btn-group pull-right" role="group">
              <button id="toStep2" type="submit" name="to_step_2" class="btn btn-primary">
                {{ 'lbl.ToStep'|trans|capitalize }}
                &nbsp;<span class="glyphicon glyphicon-chevron-right"></span>
              </button>
            </div>
          </div>
        </div>
      </div>
    {% endform %}
    {% endif %}
    {% if step2 %}
    {% form step2 %}
      <div class="row">
        <div class="col-md-12">
          <div class="panel panel-default">
            <div class="panel-heading">
              <h4 class="panel-title">
                {{ 'lbl.ChooseTemplate'|trans|capitalize }}
              </h4>
            </div>
            <div class="panel-body">
              <div class="form-group">
                <p class="text-info">{{ msg.HelpTemplates }}</p>
                {% if rbtTemplatesError %}
                <p class="text-danger">{{ rbtTemplatesError }}</p>
                {% endif %}
                <ul id="templateSelection" class="selectThumbList list-unstyled list-inline">
                  {% for templat in templates %}
                  <li{% if templat.selected %} class="active"{% endif %}>
                    <div class="panel panel-default">
                      <div class="panel-heading">
                        <label for="{{ templat.id }}" class="panel-title">
                          {{ templat.rbtTemplates }}
                          <span>{{ templat.label|capitalize }}</span>
                        </label>
                      </div>
                      <div class="panel-body">
                        <img src="/src/Backend/Modules/Mailmotor/Templates/{{ templat.language }}/{{ templat.value }}/images/thumb.jpg" width="172" height="129" class="img-thumbnail" alt="{{ templat.label|capitalize }}" />
                      </div>
                    </div>
                  </li>
                  {% endfor %}
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <div class="btn-toolbar">
            <div class="btn-group pull-right" role="group">
              <button id="toStep3" type="submit" name="to_step_3" class="btn btn-primary">
                {{ 'lbl.ToStep'|trans|capitalize }} 3
                &nbsp;<span class="glyphicon glyphicon-chevron-right"></span>
              </button>
            </div>
          </div>
        </div>
      </div>
    {% endform %}
    {% endif %}
    {% if step3 %}
    {% form step3 %}
      <div class="row">
        <div class="col-md-12">
          <div class="form-group">
            <label for="subject">
              {{ 'lbl.Subject'|trans|capitalize }}
              <abbr class="glyphicon glyphicon-asterisk" title="{{ 'lbl.RequiredField'|trans|capitalize }}"></abbr>
            </label>
            {% form_field_error subject %} {% form_field subject %}
          </div>
          <div class="form-group">
            <label for="content">
              {{ 'lbl.Content'|trans|capitalize }}
              <abbr class="glyphicon glyphicon-asterisk" title="{{ 'lbl.RequiredField'|trans|capitalize }}"></abbr>
            </label>
            <div id="iframeBox">
              <iframe id="contentBox" src="{{ geturl('edit_mailing_iframe' ) }}&amp;id={{ mailing.id }}" height="100%" width="100%"></iframe>
            </div>
          </div>
          {% if txtContentPlain %}
          <div class="form-group">
            <label for="subject">
              {{ 'lbl.PlainTextVersion'|trans|capitalize }}
            </label>
            {% form_field_error content_plain %} {% form_field content_plain %}
          </div>
          {% endif %}
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <div class="btn-toolbar">
            <div class="btn-group pull-right" role="group">
              <button id="sendContent" type="submit" name="to_step_4" class="btn btn-primary">
                {{ 'lbl.ToStep'|trans|capitalize }} 4
                &nbsp;<span class="glyphicon glyphicon-chevron-right"></span>
              </button>
            </div>
          </div>
        </div>
      </div>
    {% endform %}
    {% endif %}
    {% if step4 %}
    {% form step4 %}
      <div class="row">
        <div class="col-md-12">
          <div class="panel panel-default">
            <div class="panel-heading">
              <h4 class="panel-title">
                {{ 'lbl.Preview'|trans|capitalize }}
              </h4>
            </div>
            <div class="panel-body">
              {% if previewURL %}
              <div id="iframeBox">
                <iframe id="contentBox" src="{{ previewURL }}" height="100%" width="100%" style="border-right: 1px solid rgb(221, 221, 221); border-width: medium 1px 1px; border-style: none solid solid; border-color: -moz-use-text-color rgb(221, 221, 221) rgb(221, 221, 221); -moz-box-sizing: border-box;"></iframe>
              </div>
              {% endif %}
              {% if not previewURL %}
              <div class="options">
                <p><span class="infoMessage">{{ err.NoModuleLinked }}</span></p>
              </div>
              {% endif %}
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <div class="panel panel-default">
            <div class="panel-heading">
              <h4 class="panel-title">
                {{ 'lbl.SendPreview'|trans|capitalize }}
              </h4>
            </div>
            <div class="panel-body">
              <div class="form-group">
                <label for="email">{{ 'lbl.EmailAddress'|trans|capitalize }}</label>
                {% form_field_error email %} {% form_field email %}
              </div>
            </div>
            <div class="panel-footer">
              <div class="btn-toolbar">
                <div class="btn-group pull-right">
                  <button id="sendPreview" type="submit" class="btn btn-default" name="send_preview">
                    <span class="glyphicon glyphicon-search"></span>&nbsp;
                    {{ 'lbl.SendPreview'|trans|capitalize }}
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <div class="panel panel-default">
            <div class="panel-heading">
              <h4 class="panel-title">
                {{ 'lbl.SendOn'|trans|capitalize }}
              </h4>
            </div>
            <div class="panel-body">
              <div class="form-group">
                <label for="sendOnDate">{{ 'lbl.SendDate'|trans|capitalize }}</label>
                {% form_field send_on_date %}
              </div>
              <div class="form-group">
                <label for="sendOnTime">{{ lbl.At }}</label>
                {% form_field send_on_time %}
              </div>
            </div>
            <div class="panel-footer">
              <div class="btn-toolbar">
                <div class="btn-group pull-right">
                  <a id="sendMailing" href="#" class="btn btn-primary" title="{{ 'lbl.SendMailing'|trans|capitalize }}">
                    <span class="glyphicon glyphicon-envelope"></span>&nbsp;
                    {{ 'lbl.SendMailing'|trans|capitalize }}
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id="sendMailingConfirmationModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="{{ 'msg.MailingConfirmTitle'|trans|capitalize }}" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <span class="modal-title h4">{{ 'msg.MailingConfirmSend'|trans|capitalize }}</span>
            </div>
            <div class="modal-body">
              <p>{{ recipientStatistics }} <span id="sendOn" style="display: none;">{{ msg.SendOn }}</span></p>
              <p>{{ msg.PeopleGroups }}</p>
              <p>
                {% for group in groups %}{{ group.name }} {% if group.comma %}, {% endif %}{% endfor %}
              </p>
              <table class="table">
                <tr>
                  <th>{{ 'lbl.TemplateLanguage'|trans|capitalize }}</th>
                  <td>{{ templateLanguage }}</td>
                </tr>
                <tr>
                  <th>{{ 'lbl.Price'|trans|capitalize }}</th>
                  <td>&euro; {{ price }}</td>
                </tr>
              </table>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">{{ 'lbl.Cancel'|trans|capitalize }}</button>
              <a id="sendMailingConfirmationSubmit" href="#" class="btn btn-primary">
                {{ 'lbl.SendMailing'|trans|capitalize }}
              </a>
            </div>
          </div>
        </div>
      </div>
    {% endform %}
    {% endif %}
  </div>
</div>
<script type="text/javascript">
  //<![CDATA[
    var variables = [];
    variables = { mailingId: '{{ mailing.id }}' };
  //]]>
</script>
{% include "/Layout/Templates/StructureEndModule.html.twig" %}
{% include "/Layout/Templates/Footer.html.twig" %}
