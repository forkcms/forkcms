{% extends 'Layout/Templates/base.html.twig' %}
{% import "Layout/Templates/macros.html.twig" as macro %}

{% block actionbar %}

{% endblock %}

{% block content %}
  {% form add %}
  <div class="row fork-module-content">
    <div class="row">
      <div class="col-md-12">
        <div class="col-md-6">
          <div class="panel panel-default">
            <div class="panel-heading">
              <h2 class="panel-title">{{ 'lbl.Status'|trans|ucfirst }}</h2>
            </div>
            <div class="panel-body">
              <fieldset>
                <div class="form-group">
                  <label for="emailSubject" class="control-label">
                    {{ 'lbl.EmailSubject'|trans|ucfirst }}
                  </label>
                  {% form_field email_subject %} {% form_field_error email_subject %}
                </div>
              </fieldset>
              {% if ddmTemplate %}
                <fieldset>
                  <div class="form-group">
                    <label for="template" class="control-label">{{ 'lbl.Template'|trans|ucfirst }}</label>
                    {% form_field template %} {% form_field_error template %}
                  </div>
                </fieldset>
              {% endif %}
              <fieldset>
                <div class="form-group">
                  <label for="email" class="control-label">
                    {{ 'lbl.Recipient'|trans|ucfirst }}
                    {{ macro.required }}
                  </label>
                  <ul class="list-unstyled">
                    {% for option in recipient %}
                      <li class="radio">
                        <label for="{{ option.id }}">{{ option.rbtRecipient|raw }} {{ option.label }}</label>
                      </li>
                    {% endfor %}
                  </ul>
                </div>
                <div class="form-group" id="recipientGroupFields">
                  {% form_field email_fields %} {% form_field_error email_fields %}
                </div>
                <div class="form-group" id="recipientGroupEmail">
                  {% form_field email_addresses %} {% form_field_error email_addresses %}
                </div>
              </fieldset>
              <fieldset>
                <legend>
                  {{ 'lbl.From'|trans|ucfirst }}
                </legend>
                <div class="form-group">
                  <label for="fromName" class="control-label">
                    {{ 'lbl.Name'|trans|ucfirst }}
                    {{ macro.required }}
                  </label>
                  {% form_field from_name %} {% form_field_error from_name %}
                </div>
                <div class="form-group">
                  <label for="fromEmail" class="control-label">
                    {{ 'lbl.Email'|trans|ucfirst }}
                    {{ macro.required }}
                  </label>
                  {% form_field from_email %} {% form_field_error from_email %}
                </div>
              </fieldset>
            </div>
          </div>
        </div>
        <div class="col-md-6">
          <div class="panel panel-default panel-editor">
            <div class="panel-heading">
              <h2 class="panel-title">{{ 'lbl.Message'|trans|ucfirst }}</h2>
            </div>
            <div class="panel-body">
              {% form_field email_body %}
            </div>
            {% if txtEmailBodyError %}
              <div class="panel-footer">
                {% form_field_error email_body %}
              </div>
            {% endif %}
          </div>
          <div class="panel panel-default">
            <div class="panel-heading">
              <h2 class="panel-title">{{ 'lbl.Extra'|trans|ucfirst }}</h2>
            </div>
            <div class="panel-body">
              <fieldset class="last">
                <div class="form-group last">
                  <label for="emailData" class="control-label">
                    {% form_field email_data %} {{ 'lbl.EmailFieldsData'|trans|ucfirst }}
                  </label>
                  {% form_field_error email_data %}
                </div>
              </fieldset>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="row fork-module-actions">
    <div class="col-md-12">
      <div class="btn-toolbar">
        <div class="btn-group" role="group">
          {{ macro.buttonIcon(geturl('Emails', null, '&id='~item.id ), 'times', 'lbl.Cancel'|trans|ucfirst, 'btn-default') }}
        </div>
        <div class="btn-group pull-right" role="group">
          {{ macro.buttonIcon('', 'plus-square', 'lbl.Add'|trans|ucfirst, 'btn-primary', { "id":"addButton", "type":"submit", "name":"add" }) }}
        </div>
      </div>
    </div>
  </div>
  {% endform %}
{% endblock %}
