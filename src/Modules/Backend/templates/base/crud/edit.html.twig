{% extends '@Backend/base/base.html.twig' %}
{% import '@Backend/base/macros.html.twig' as macro %}
{% set crud_delete_module = null %}
{% set crud_index_module = null %}
{% set crud_index_parameters = [] %}
{% set crud_index_relative = false %}
{% set crud_index_locale = null %}
{% if crud_delete_name is not defined %}
  {% set crud_delete_name = breadcrumbs|last.label %}
{% endif %}

{% block content %}
  {% if form_theme is defined %}
    {% form_theme backend_form with ['@Backend/base/formTheme.html.twig', form_theme] %}
  {% endif %}
  {{ form_start(backend_form) }}
  {{ form_widget(backend_form) }}
  {{ form_errors(backend_form) }}
  {{ form_rest(backend_form) }}

  <div class="btn-toolbar d-flex">
    <div class="btn-group" role="group">
      {% if crudDeleteAction is defined and is_allowed(crudDeleteAction, crud_delete_module) %}
        {{ macro.buttonIcon('', deleteIcon|default('trash'), deleteLabel|default('lbl.Delete'|trans|ucfirst), deleteClass|default('btn-danger'), {"type": "button", "data-bs-toggle": "modal", "data-bs-target": "#confirmDelete"}) }}
      {% endif %}
      {% if crud_index_action is defined and is_allowed(crud_index_action, crud_index_module) %}
        <div class="btn-group" role="group">
          {{ macro.buttonIcon(action_path(crud_index_action, crud_index_module, crud_index_parameters, crud_index_relative, crud_index_locale), crudIndexIcon|default('times'), crudIndexLabel|default('lbl.Cancel'|trans|ucfirst), crudIndexClass|default('btn-default')) }}
        </div>
      {% endif %}
      {% block leftToolbar %}{% endblock %}
    </div>
    <div class="btn-group ms-auto" role="group">
      {% block rightToolbar %}{% endblock %}
      {{ macro.buttonIcon('', submitIcon|default('save'), submitLabel|default('lbl.Save'|trans|ucfirst), submitClass|default('btn-primary')) }}
    </div>
  </div>
  {{ form_end(backend_form) }}

  {% if crudDeleteAction is defined and is_allowed(crudDeleteAction, crud_delete_module) %}
    {{ form_start(backend_delete_form) }}
    {{ form_row(backend_delete_form._token) }}
    {{ form_row(backend_delete_form.id) }}
    <div class="modal fade" id="confirmDelete" role="dialog" tabindex="-1" aria-hidden="true" aria-labelledby="confirmDeleteTitle">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title" id="confirmDeleteTitle">{{ confirmDeleteTitle|default('lbl.Delete'|trans|ucfirst) }}</h4>
          </div>
          <div class="modal-body">
            <p>{{ confirmDeleteMessage|default('msg.ConfirmDelete'|trans|format(crud_delete_name|e)) }}</p>
          </div>
          <div class="modal-footer">
            {{ macro.buttonIcon('', confirmDeleteCancelIcon|default('times'), confirmDeleteCancelLabel|default('lbl.Cancel'|trans|ucfirst), confirmDeleteCancelClass|default('btn-default'), {"type": "button", "data-bs-dismiss": "modal"}) }}
            {{ macro.buttonIcon('', confirmDeleteSubmitIcon|default('trash'), confirmDeleteSubmitLabel|default('lbl.Delete'|trans|ucfirst), confirmDeleteSubmitClass|default('btn-danger'), {"type": "submit"}) }}
          </div>
        </div>
      </div>
    </div>
    {{ form_end(backend_delete_form) }}
  {% endif %}
{% endblock %}
